# task.txt

## TASK 1 — Replace ALL legacy workout log forms with the new UI

Context:
In the History tab, the + button in the top right opens a "Log Past Workout" form that still uses the OLD form design. This must be replaced with the new unified workout form style used elsewhere in the app.

Requirements:
1. Identify all components and routes that open a workout logging form:
   - History tab → top-right + button → "Log Past Workout"
   - Any other entry points that create or edit a workout (past or present)
2. Create a single shared component for workout logging, e.g. `WorkoutLogFormV2`, that:
   - Matches the new app aesthetic (dark theme, rounded containers, consistent typography and spacing)
   - Uses the same input and button styles as other modernized screens (Add Routine, login, etc.)
   - Supports:
     - Date (required) and Time (optional but recommended)
     - Load from routine
     - Workout name
     - Duration (min)
     - Exercises list with add/edit/remove
3. Replace legacy forms:
   - Ensure the History tab + button uses `WorkoutLogFormV2` instead of any older `LogPastWorkout` or similar component.
   - Remove or deprecate the old form component(s) so they are not used anywhere.
4. Mobile behavior:
   - The form should either be a full-screen sheet or a consistent modal, matching new design.
   - Support scrolling when keyboard is open without cutting off the "Log Past Workout" button.
   - Respect safe areas (no content under status bar or home bar).

Acceptance criteria:
- Clicking the + button in History always opens the new styled workout logging UI.
- There is no visual mismatch between this form and the rest of the updated app.
- There is no remaining reference to the old workout log form components.

------------------------------------------------------------

## TASK 2 — Replace ALL legacy Edit Profile forms with the new UI

Context:
In Settings → Profile → Edit profile icon, the app still shows the OLD edit profile form. This must be updated to the new design and fields.

Requirements:
1. Identify the component used when:
   - Navigating: Settings → Profile → tapping Edit icon.
2. Create or reuse a unified profile form component, e.g. `ProfileFormV2`, that:
   - Matches the new app aesthetic (same font scale, spacing, input and button styles).
   - Supports existing fields AND the new extended health metrics (if already implemented):
     - Name, email (or non-editable if required)
     - Country / region and timezone (if available)
     - Height, weight, body fat %, goal, training age, activity level, injuries/limitations.
3. Replace legacy form:
   - Wire the Edit profile icon to open `ProfileFormV2`.
   - Remove or deprecate the old profile form component(s).
4. UX behavior:
   - The form should scroll properly on small screens.
   - Keyboard should not hide important fields or the save button.
   - Validation and error messages should follow the updated design system.

Acceptance criteria:
- Tapping Edit profile always opens the new profile edit UI.
- All profile fields use the same updated input styles seen elsewhere in the app.
- No old form layout appears anywhere in the profile flow.

------------------------------------------------------------

## TASK 3 — Enforce a single source of truth for form styling

Context:
Some forms were updated, but others still use legacy styling. We need a consistent, reusable system so old forms cannot leak back in.

Requirements:
1. Create shared form primitives (or ensure they exist):
   - `FormScreenLayout` (page/sheet layout with header + scrollable content + safe bottom padding).
   - `FormSection` (title, subtitle, divider spacing).
   - `TextInput`, `SelectInput`, `DateTimeInput`, `PrimaryButton`, `SecondaryButton` components matching new design tokens.
2. Refactor:
   - Make `WorkoutLogFormV2` and `ProfileFormV2` use these shared primitives.
   - Search the codebase for any direct use of legacy form components or ad-hoc styled inputs and replace them with the new primitives where feasible.
3. Design tokens:
   - Use shared typography scale, colors, radii, spacing (e.g. 8 / 12 / 16 / 24) instead of hard-coded values.

Acceptance criteria:
- All visible forms (workout logging, past workout, profile edit) share the same look and feel.
- New form features added in future can reuse `FormScreenLayout` and other primitives without reintroducing old styles.